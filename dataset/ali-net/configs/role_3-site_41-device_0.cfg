!
version 15.2
!
service timestamps debug datetime msec
!
service timestamps log datetime msec
!
boot-start-marker
!
boot-end-marker
!
no aaa new-model
!
ip cef
!
no ipv6 cef
!
multilink bundle-name authenticated
!
ip forward-protocol nd
!
no ip http server
!
no ip http secure-server
!
ip bgp-community new-format
!
hostname role_3-site_41-device_0
!
interface GigabitEthernet0/1
 ip address 10.0.1.97 255.255.255.252
 description role_1-site_14-device_0
!
interface GigabitEthernet0/2
 ip address 10.0.2.97 255.255.255.252
 description role_1-site_17-device_0
!
interface GigabitEthernet0/3
 ip address 10.0.3.73 255.255.255.252
 description role_3-site_40-device_0
!
interface GigabitEthernet0/5
 ip address 10.0.4.180 255.255.255.252
 description role_1-site_10-device_0
!
interface GigabitEthernet0/4
 ip address 10.0.3.137 255.255.255.252
 description role_1-site_12-device_0
!

!
interface loopback 0
 ip address 82.163.100.31 255.255.255.255
!
router bgp 176
 bgp router-id 82.163.100.31
 ! bgp cluster-id 0.66.1.101
 network 124.124.13.0 mask 255.255.255.0
 network 124.124.12.0 mask 255.255.255.0
 network 0.0.0.0 mask 0.0.0.0
 neighbor group_1 peer-group
 neighbor 163.154.129.166 peer-group group_1
 neighbor 163.154.129.166 remote-as 128
 neighbor 163.154.129.166 description role_1-site_14-device_0
 neighbor 163.154.129.166 update-source LoopBack0
 neighbor 163.154.129.170 peer-group group_1
 neighbor 163.154.129.170 remote-as 130
 neighbor 163.154.129.170 description role_1-site_17-device_0
 neighbor 163.154.129.170 update-source LoopBack0
 neighbor group_1 send-community both
 neighbor group_0 peer-group
 neighbor 82.163.100.89 peer-group group_0
 neighbor 82.163.100.89 remote-as 127
 neighbor 82.163.100.89 description role_1-site_12-device_0
 neighbor 82.163.100.89 update-source LoopBack0
 neighbor 82.163.100.88 peer-group group_0
 neighbor 82.163.100.88 remote-as 126
 neighbor 82.163.100.88 description role_1-site_10-device_0
 neighbor 82.163.100.88 update-source LoopBack0
 neighbor group_0 send-community both
 neighbor group_2 peer-group
 neighbor 82.163.100.30 peer-group group_2
 neighbor 82.163.100.30 remote-as 175
 neighbor 82.163.100.30 description role_3-site_40-device_0
 neighbor 82.163.100.30 update-source LoopBack0
 neighbor group_2 send-community both
 neighbor group_1 route-map policy_1 in
 neighbor group_0 route-map policy_1 in
 neighbor group_1 route-map policy_0 out
 neighbor group_0 route-map policy_0 out
!
route-map policy_0 permit 10
 match ip address prefix-list 5
route-map policy_0 permit 20
 match ip address prefix-list 6
route-map policy_0 permit 25

 match community 7
 set community 23118:62210 23118:8000 additive
route-map policy_0 deny 40
 match ip address prefix-list 8
route-map policy_0 permit 60

 match community 10
route-map policy_0 permit 100

!

route-map policy_1 permit 5
 match ip address prefix-list 8
 set local-preference 100
route-map policy_1 permit 30

 match community 14
route-map policy_1 permit 50

 match community 17
route-map policy_1 permit 60

 match community 19
 match community 18
route-map policy_1 permit 65

 match community 21
 match community 20
route-map policy_1 permit 80
 match ip address prefix-list 6
route-map policy_1 permit 90
 match ip address prefix-list 23
route-map policy_1 deny 100

 match community 27
 match community 25
 match community 24
route-map policy_1 permit 110

 match community 29
 match community 33
 match community 21
 match community 39
 match community 37
 match community 25
 match community 20
 match community 35
 match community 31
 match community 24
route-map policy_1 deny 1000

!
ip prefix-list 5 seq 10 permit 82.163.100.7/32 ge 32 le 32
ip prefix-list 5 seq 20 permit 82.163.100.8/32 ge 32 le 32
ip prefix-list 5 seq 30 permit 82.163.100.34/32 ge 32 le 32
ip prefix-list 5 seq 40 permit 82.163.100.35/32 ge 32 le 32
!
ip prefix-list 6 seq 10 permit 113.146.0.0/16 ge 16 le 32
ip prefix-list 6 seq 20 permit 113.2.0.0/16 ge 16 le 32
ip prefix-list 6 seq 30 permit 113.213.0.0/16 ge 16 le 32
ip prefix-list 6 seq 40 permit 113.27.0.0/16 ge 16 le 32
ip prefix-list 6 seq 50 permit 79.244.0.0/15 ge 15 le 32
ip prefix-list 6 seq 60 permit 79.0.0.0/15 ge 15 le 32
!
ip community-list 7 permit 35607:8807
!
ip prefix-list 8 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip community-list 10 permit ^23118:79...$
!
!
ip community-list 14 permit ^23118:76...$
!
ip community-list 17 permit ^23111:39...$
!
ip community-list 19 permit ^23118:39...$
!
ip community-list 18 permit 94129:23111
!
ip community-list 21 permit ^23118:656..$
!
ip community-list 20 permit ^23118:655..$
!
ip prefix-list 23 seq 10 permit 163.154.128.0/24 ge 24 le 32
ip prefix-list 23 seq 20 permit 163.154.129.0/24 ge 24 le 32
ip prefix-list 23 seq 30 permit 82.163.64.0/24 ge 24 le 32
ip prefix-list 23 seq 40 permit 82.163.65.0/24 ge 24 le 32
ip prefix-list 23 seq 50 permit 82.163.68.0/22 ge 22 le 32
ip prefix-list 23 seq 60 permit 82.163.100.0/24 ge 24 le 32
ip prefix-list 23 seq 70 permit 82.163.101.0/24 ge 24 le 32
ip prefix-list 23 seq 80 permit 82.163.74.0/24 ge 24 le 32
!
ip community-list 27 permit ^23118:652..$
!
ip community-list 25 permit ^23118:629..$
!
ip community-list 24 permit ^23118:626..$
!
ip community-list 29 permit 23118:8000
!
ip community-list 33 permit ^23118:625..$
!
!
ip community-list 39 permit 35607:35607
!
ip community-list 37 permit ^23118:620..$
!
!
!
ip community-list 35 permit ^23118:623..$
!
ip community-list 31 permit ^23118:622..$
!
!
ip route 163.154.129.166 255.255.255.255 10.0.1.96
!
ip route 163.154.129.170 255.255.255.255 10.0.2.96
!
ip route 82.163.100.30 255.255.255.255 10.0.3.72
!
ip route 82.163.100.88 255.255.255.255 10.0.4.181
!
ip route 82.163.100.89 255.255.255.255 10.0.3.136
!
ip route 124.124.13.0 255.255.255.0 Null0
ip route 124.124.12.0 255.255.255.0 Null0
