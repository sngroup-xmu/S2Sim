!
version 15.2
!
service timestamps debug datetime msec
!
service timestamps log datetime msec
!
boot-start-marker
!
boot-end-marker
!
no aaa new-model
!
ip cef
!
no ipv6 cef
!
multilink bundle-name authenticated
!
ip forward-protocol nd
!
no ip http server
!
no ip http secure-server
!
ip bgp-community new-format
!
hostname role_3-site_17-device_0
!
interface GigabitEthernet0/1
 ip address 10.0.1.245 255.255.255.252
 description role_1-site_14-device_0
!
interface GigabitEthernet0/2
 ip address 10.0.2.241 255.255.255.252
 description role_1-site_17-device_0
!
interface GigabitEthernet0/5
 ip address 10.0.5.101 255.255.255.252
 description role_1-site_10-device_0
!
interface GigabitEthernet0/3
 ip address 10.0.4.29 255.255.255.252
 description role_1-site_12-device_0
!
interface GigabitEthernet0/4
 ip address 10.0.4.97 255.255.255.252
 description role_3-site_14-device_0
!

!
interface loopback 0
 ip address 163.154.129.167 255.255.255.255
!
router bgp 156
 bgp router-id 163.154.129.167
 ! bgp cluster-id 0.0.99.101
 neighbor group_4 peer-group
 neighbor group_4 send-community both
 neighbor group_1 peer-group
 neighbor group_1 send-community both
 neighbor group_0 peer-group
 neighbor 163.154.129.163 peer-group group_0
 neighbor 163.154.129.163 remote-as 152
 neighbor 163.154.129.163 description role_3-site_14-device_0
 neighbor 163.154.129.163 update-source lo0
 neighbor group_0 send-community both
 neighbor group_3 peer-group
 neighbor 163.154.129.166 peer-group group_3
 neighbor 163.154.129.166 remote-as 128
 neighbor 163.154.129.166 description role_1-site_14-device_0
 neighbor 163.154.129.166 update-source lo0
 neighbor 163.154.129.170 peer-group group_3
 neighbor 163.154.129.170 remote-as 130
 neighbor 163.154.129.170 description role_1-site_17-device_0
 neighbor 163.154.129.170 update-source lo0
 neighbor group_3 send-community both
 neighbor group_2 peer-group
 neighbor 82.163.100.89 peer-group group_2
 neighbor 82.163.100.89 remote-as 127
 neighbor 82.163.100.89 description role_1-site_12-device_0
 neighbor 82.163.100.89 update-source lo0
 neighbor 82.163.100.88 peer-group group_2
 neighbor 82.163.100.88 remote-as 126
 neighbor 82.163.100.88 description role_1-site_10-device_0
 neighbor 82.163.100.88 update-source lo0
 neighbor group_2 send-community both
 neighbor group_3 route-map policy_6 in
 neighbor group_2 route-map policy_4 in
 neighbor group_4 route-map policy_3 out
 neighbor group_1 route-map policy_1 out
 neighbor group_0 route-map policy_0 out
 neighbor group_3 route-map policy_2 out
 neighbor group_2 route-map policy_5 out
!
route-map policy_6 permit 10
 match ip address prefix-list 44
route-map policy_6 permit 20

 match protocol bgp
route-map policy_6 permit 30

 match protocol bgp
route-map policy_6 permit 40

 match community 19
 match protocol bgp
route-map policy_6 permit 50

 match community 20
 match protocol bgp
route-map policy_6 permit 60

 match protocol bgp
route-map policy_6 permit 70

 match community 13
 match community 14
 match protocol bgp
route-map policy_6 permit 80

 match protocol bgp
route-map policy_6 permit 90
 match ip address prefix-list 15
 match protocol bgp
route-map policy_6 permit 100
 match ip address prefix-list 25
 match protocol bgp
route-map policy_6 permit 110
 match ip address prefix-list 26
 match protocol bgp
route-map policy_6 deny 120

 match community 27
 match protocol bgp
route-map policy_6 permit 130

 match community 28
 match community 29
 match community 31
 match community 37
 match community 30
 match community 34
 match community 38
 match protocol bgp
route-map policy_6 permit 140

 match community 40
 match protocol bgp
route-map policy_6 permit 150
 match ip address prefix-list 41
route-map policy_6 permit 160

 match community 42
 set local-preference 100
route-map policy_6 permit 170

 match protocol bgp
route-map policy_6 deny 180

!

route-map policy_5 permit 20
 match ip address prefix-list 43
 set ip next-hop 163.154.129.167
route-map policy_5 permit 30
 match ip address prefix-list 11
 set ip next-hop 163.154.129.167
 set community 23118:65610 23118:8000 additive
route-map policy_5 permit 40

 set ip next-hop 163.154.129.167
 set community 23118:65610 23118:8000 additive
route-map policy_5 permit 50
 match ip address prefix-list 12
 match protocol static
 set ip next-hop 163.154.129.167
 set community 23118:65600 23118:8000 23118:76000 23118:61006 additive
route-map policy_5 permit 60

 match protocol bgp
 set ip next-hop 163.154.129.167
!

route-map policy_0 permit 10

 set ip next-hop 163.154.129.167
!

route-map policy_2 permit 20
 match ip address prefix-list 10
 set ip next-hop 163.154.129.167
route-map policy_2 permit 30
 match ip address prefix-list 11
 set ip next-hop 163.154.129.167
 set community 23118:65610 23118:8000 additive
route-map policy_2 permit 40

 set ip next-hop 163.154.129.167
 set community 23118:65610 23118:8000 additive
route-map policy_2 permit 50
 match ip address prefix-list 12
 match protocol static
 set ip next-hop 163.154.129.167
 set community 23118:65600 23118:8000 23118:76000 23118:61006 additive
route-map policy_2 permit 60

 match protocol bgp
 set ip next-hop 163.154.129.167
!

route-map policy_1 deny 20
 match ip address prefix-list 4
route-map policy_1 deny 30
 match ip address prefix-list 5
route-map policy_1 permit 40

 match community 6
route-map policy_1 permit 50
 match ip address prefix-list 7
route-map policy_1 permit 60
 match ip address prefix-list 8
 match protocol bgp
route-map policy_1 deny 70

!

route-map policy_4 deny 10
 match ip address prefix-list 16
route-map policy_4 permit 20

 match protocol bgp
route-map policy_4 permit 30

 match protocol bgp
route-map policy_4 permit 40

 match community 19
 match protocol bgp
route-map policy_4 permit 50

 match community 20
 match protocol bgp
route-map policy_4 permit 60

 match protocol bgp
route-map policy_4 permit 70

 match community 13
 match community 14
 match protocol bgp
route-map policy_4 permit 80

 match protocol bgp
route-map policy_4 permit 90
 match ip address prefix-list 15
 match protocol bgp
route-map policy_4 permit 100
 match ip address prefix-list 25
 match protocol bgp
route-map policy_4 permit 110
 match ip address prefix-list 26
 match protocol bgp
route-map policy_4 deny 120

 match community 27
 match protocol bgp
route-map policy_4 permit 130

 match community 28
 match community 29
 match community 31
 match community 37
 match community 30
 match community 34
 match community 38
 match protocol bgp
route-map policy_4 permit 140

 match community 40
 match protocol bgp
route-map policy_4 permit 150
 match ip address prefix-list 41
route-map policy_4 permit 160

 match community 42
 set local-preference 100
route-map policy_4 permit 170

 match protocol bgp
route-map policy_4 deny 180

!

route-map policy_3 deny 10
 match ip address prefix-list 5
route-map policy_3 deny 30
 match ip address prefix-list 4
route-map policy_3 permit 40

 match community 13
 match community 14
 match protocol bgp
route-map policy_3 permit 50
 match ip address prefix-list 15
 match protocol bgp
route-map policy_3 deny 60

!
ip prefix-list 44 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip community-list 19 permit 23111:39000
!
ip community-list 20 permit 23118:76000
!
ip community-list 13 permit 94129:23111
!
ip community-list 14 permit 23118:39000
!
ip prefix-list 15 seq 10 permit 113.146.0.0/16 ge 16 le 32
ip prefix-list 15 seq 20 permit 113.2.0.0/16 ge 16 le 32
ip prefix-list 15 seq 30 permit 113.213.0.0/16 ge 16 le 32
ip prefix-list 15 seq 40 permit 113.27.0.0/16 ge 16 le 32
ip prefix-list 15 seq 50 permit 79.244.0.0/15 ge 15 le 32
ip prefix-list 15 seq 60 permit 79.0.0.0/15 ge 15 le 32
!
ip prefix-list 25 seq 10 permit 163.154.128.0/24 ge 24 le 32
ip prefix-list 25 seq 20 permit 163.154.129.0/24 ge 24 le 32
ip prefix-list 25 seq 30 permit 82.163.64.0/24 ge 24 le 32
ip prefix-list 25 seq 40 permit 82.163.65.0/24 ge 24 le 32
ip prefix-list 25 seq 50 permit 82.163.68.0/22 ge 22 le 32
ip prefix-list 25 seq 60 permit 82.163.74.0/24 ge 24 le 32
ip prefix-list 25 seq 70 permit 82.163.100.0/24 ge 24 le 32
ip prefix-list 25 seq 80 permit 82.163.101.0/24 ge 24 le 32
ip prefix-list 25 seq 90 permit 22.154.72.0/24 ge 24 le 32
ip prefix-list 25 seq 100 permit 82.163.73.100/30 ge 30 le 30
!
ip prefix-list 26 seq 10 permit 163.154.128.0/24 ge 24 le 32
ip prefix-list 26 seq 20 permit 163.154.129.0/24 ge 24 le 32
ip prefix-list 26 seq 30 permit 82.163.64.0/24 ge 24 le 32
ip prefix-list 26 seq 40 permit 82.163.65.0/24 ge 24 le 32
ip prefix-list 26 seq 50 permit 82.163.68.0/22 ge 22 le 32
ip prefix-list 26 seq 60 permit 82.163.73.100/30 ge 30 le 30
!
ip community-list 27 permit 23118:652..$
!
ip community-list 28 permit 23118:655..$
!
ip community-list 29 permit 23118:8000
!
ip community-list 31 permit 23118:625..$
!
ip community-list 37 permit 23118:622..$
!
ip community-list 30 permit 23118:620..$
!
ip community-list 34 permit 23118:629..$
!
ip community-list 38 permit 35607:35607
!
ip community-list 40 permit ^23118:656..$
!
ip prefix-list 41 seq 10 permit 64.55.96.0/19 ge 19 le 19
ip prefix-list 41 seq 20 permit 64.55.112.0/21 ge 21 le 21
!
ip community-list 42 permit 35607:4606
!
ip prefix-list 43 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip prefix-list 11 seq 10 permit 130.169.0.0/18 ge 18 le 18
ip prefix-list 11 seq 20 permit 130.173.0.0/17 ge 17 le 17
ip prefix-list 11 seq 30 permit 130.200.128.0/17 ge 17 le 17
ip prefix-list 11 seq 40 permit 64.55.117.0/24 ge 24 le 24
ip prefix-list 11 seq 50 permit 130.150.0.0/16 ge 16 le 16
ip prefix-list 11 seq 60 permit 130.150.0.0/17 ge 17 le 17
ip prefix-list 11 seq 70 permit 130.150.128.0/17 ge 17 le 17
ip prefix-list 11 seq 80 permit 130.169.82.0/23 ge 23 le 23
ip prefix-list 11 seq 90 permit 130.220.0.0/16 ge 16 le 16
ip prefix-list 11 seq 100 permit 20.67.64.0/18 ge 18 le 18
ip prefix-list 11 seq 110 permit 130.181.0.0/16 ge 16 le 16
!
ip prefix-list 12 seq 10 permit 163.154.129.128/25 ge 25 le 25
ip prefix-list 12 seq 20 permit 82.163.100.0/24 ge 24 le 24
!
ip prefix-list 10 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip prefix-list 4 seq 10 permit 50.116.128.0/17 ge 17 le 32
ip prefix-list 4 seq 20 permit 146.95.45.128/25 ge 25 le 32
ip prefix-list 4 seq 30 permit 146.148.129.0/25 ge 25 le 32
ip prefix-list 4 seq 40 permit 146.148.129.128/25 ge 25 le 32
ip prefix-list 4 seq 50 permit 146.148.130.0/25 ge 25 le 32
ip prefix-list 4 seq 60 permit 146.148.130.128/25 ge 25 le 32
ip prefix-list 4 seq 70 permit 146.148.131.0/25 ge 25 le 32
ip prefix-list 4 seq 80 permit 146.148.131.128/25 ge 25 le 32
ip prefix-list 4 seq 90 permit 146.148.128.0/17 ge 17 le 32
ip prefix-list 4 seq 100 permit 50.127.192.0/18 ge 18 le 32
ip prefix-list 4 seq 110 permit 39.93.0.0/16 ge 16 le 32
ip prefix-list 4 seq 120 permit 146.246.128.0/17 ge 17 le 32
!
ip prefix-list 5 seq 10 permit 110.218.252.0/30 ge 30 le 30
ip prefix-list 5 seq 20 permit 110.218.252.4/30 ge 30 le 30
ip prefix-list 5 seq 30 permit 50.187.20.0/30 ge 30 le 30
ip prefix-list 5 seq 40 permit 50.187.20.4/30 ge 30 le 30
ip prefix-list 5 seq 50 permit 50.187.96.0/30 ge 30 le 30
ip prefix-list 5 seq 60 permit 50.187.96.4/30 ge 30 le 30
ip prefix-list 5 seq 70 permit 135.74.21.0/24 ge 24 le 24
ip prefix-list 5 seq 80 permit 135.74.23.0/24 ge 24 le 24
ip prefix-list 5 seq 90 permit 50.17.29.0/28 ge 28 le 28
ip prefix-list 5 seq 100 permit 50.17.29.16/28 ge 28 le 28
ip prefix-list 5 seq 110 permit 50.17.29.32/28 ge 28 le 28
ip prefix-list 5 seq 120 permit 50.175.22.112/28 ge 28 le 28
ip prefix-list 5 seq 130 permit 50.175.22.0/28 ge 28 le 28
ip prefix-list 5 seq 140 permit 50.175.22.16/28 ge 28 le 28
ip prefix-list 5 seq 150 permit 50.175.22.32/28 ge 28 le 28
ip prefix-list 5 seq 160 permit 113.130.2.128/28 ge 28 le 28
ip prefix-list 5 seq 170 permit 49.29.255.252/32 ge 32 le 32
ip prefix-list 5 seq 180 permit 49.29.255.253/32 ge 32 le 32
ip prefix-list 5 seq 190 permit 50.187.100.0/28 ge 28 le 28
ip prefix-list 5 seq 200 permit 50.187.100.16/28 ge 28 le 28
ip prefix-list 5 seq 210 permit 50.187.100.32/28 ge 28 le 28
ip prefix-list 5 seq 220 permit 50.187.40.0/30 ge 30 le 30
ip prefix-list 5 seq 230 permit 50.187.40.4/30 ge 30 le 30
ip prefix-list 5 seq 240 permit 50.175.22.48/28 ge 28 le 32
ip prefix-list 5 seq 250 permit 50.175.22.64/28 ge 28 le 32
ip prefix-list 5 seq 260 permit 50.175.22.80/28 ge 28 le 32
ip prefix-list 5 seq 270 permit 50.17.29.48/28 ge 28 le 32
ip prefix-list 5 seq 280 permit 50.17.29.64/28 ge 28 le 32
ip prefix-list 5 seq 290 permit 50.17.29.80/28 ge 28 le 32
ip prefix-list 5 seq 300 permit 50.187.100.64/28 ge 28 le 32
ip prefix-list 5 seq 310 permit 113.130.61.0/24 ge 24 le 32
ip prefix-list 5 seq 320 permit 50.187.100.0/24 ge 28 le 32
ip prefix-list 5 seq 330 permit 113.130.138.0/28 ge 28 le 28
ip prefix-list 5 seq 340 permit 113.130.138.0/24 ge 28 le 32
!
ip community-list 6 permit 23118:8000
!
ip prefix-list 7 seq 10 permit 82.163.78.184/29 ge 29 le 29
ip prefix-list 7 seq 20 permit 82.163.78.192/29 ge 29 le 29
ip prefix-list 7 seq 30 permit 110.218.252.228/30 ge 30 le 30
ip prefix-list 7 seq 40 permit 110.218.252.232/30 ge 30 le 30
ip prefix-list 7 seq 50 permit 82.163.73.100/30 ge 30 le 30
!
ip prefix-list 8 seq 10 permit 163.154.129.128/25 ge 25 le 32
ip prefix-list 8 seq 20 permit 82.163.100.0/24 ge 24 le 32
!
ip prefix-list 16 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip route 163.154.129.166 255.255.255.255 10.0.1.244
!
ip route 163.154.129.170 255.255.255.255 10.0.2.240
!
ip route 82.163.100.88 255.255.255.255 10.0.5.100
!
ip route 82.163.100.89 255.255.255.255 10.0.4.28
!
ip route 163.154.129.163 255.255.255.255 10.0.4.96
!

