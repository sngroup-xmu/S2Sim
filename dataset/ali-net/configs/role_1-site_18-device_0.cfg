!
version 15.2
!
service timestamps debug datetime msec
!
service timestamps log datetime msec
!
boot-start-marker
!
boot-end-marker
!
no aaa new-model
!
ip cef
!
no ipv6 cef
!
multilink bundle-name authenticated
!
ip forward-protocol nd
!
no ip http server
!
no ip http secure-server
!
ip bgp-community new-format
!
hostname role_1-site_18-device_0
!
interface GigabitEthernet0/2
 ip address 10.0.1.181 255.255.255.252
 description role_1-site_14-device_0
!
interface GigabitEthernet0/6
 ip address 10.0.5.160 255.255.255.252
 description role_1-site_43-device_0
!
interface GigabitEthernet0/3
 ip address 10.0.2.177 255.255.255.252
 description role_1-site_17-device_0
!
interface GigabitEthernet0/5
 ip address 10.0.4.201 255.255.255.252
 description role_2-site_9-device_0
!
interface GigabitEthernet0/1
 ip address 10.0.0.173 255.255.255.252
 description role_1-site_42-device_0
!
interface GigabitEthernet0/4
 ip address 10.0.4.113 255.255.255.252
 description role_2-site_31-device_0
!

!
interface loopback 0
 ip address 82.163.100.127 255.255.255.255
!
router bgp 131
 bgp router-id 82.163.100.127
 ! bgp cluster-id 0.0.1.102
 neighbor group_9 peer-group
 neighbor group_9 send-community both
 neighbor group_8 peer-group
 neighbor group_8 send-community both
 neighbor group_5 peer-group
 neighbor group_5 send-community both
 neighbor group_17 peer-group
 neighbor group_17 send-community both
 neighbor group_4 peer-group
 neighbor group_4 send-community both
 neighbor group_7 peer-group
 neighbor group_7 send-community both
 neighbor group_15 peer-group
 neighbor group_15 send-community both
 neighbor group_6 peer-group
 neighbor group_6 send-community both
 neighbor group_16 peer-group
 neighbor group_16 send-community both
 neighbor group_1 peer-group
 neighbor 163.154.129.162 peer-group group_1
 neighbor 163.154.129.162 remote-as 137
 neighbor 163.154.129.162 description role_1-site_43-device_0
 neighbor 163.154.129.162 update-source lo0
 neighbor 163.154.129.161 peer-group group_1
 neighbor 163.154.129.161 remote-as 136
 neighbor 163.154.129.161 description role_1-site_42-device_0
 neighbor 163.154.129.161 update-source lo0
 neighbor group_1 send-community both
 neighbor group_13 peer-group
 neighbor group_13 send-community both
 neighbor group_0 peer-group
 neighbor group_0 send-community both
 neighbor group_14 peer-group
 neighbor group_14 send-community both
 neighbor group_3 peer-group
 neighbor 163.154.129.166 peer-group group_3
 neighbor 163.154.129.166 remote-as 128
 neighbor 163.154.129.166 description role_1-site_14-device_0
 neighbor 163.154.129.166 update-source lo0
 neighbor 163.154.129.170 peer-group group_3
 neighbor 163.154.129.170 remote-as 130
 neighbor 163.154.129.170 description role_1-site_17-device_0
 neighbor 163.154.129.170 update-source lo0
 neighbor group_3 send-community both
 neighbor group_11 peer-group
 neighbor group_11 send-community both
 neighbor group_2 peer-group
 neighbor 82.163.100.236 peer-group group_2
 neighbor 82.163.100.236 remote-as 149
 neighbor 82.163.100.236 description role_2-site_9-device_0
 neighbor 82.163.100.236 update-source lo0
 neighbor 82.163.100.235 peer-group group_2
 neighbor 82.163.100.235 remote-as 142
 neighbor 82.163.100.235 description role_2-site_31-device_0
 neighbor 82.163.100.235 update-source lo0
 neighbor group_2 send-community both
 neighbor group_12 peer-group
 neighbor group_12 send-community both
 neighbor group_10 peer-group
 neighbor group_10 send-community both
 neighbor group_9 route-map policy_1 out
 neighbor group_8 route-map policy_3 out
 neighbor group_5 route-map policy_3 out
 neighbor group_17 route-map policy_1 out
 neighbor group_4 route-map policy_1 out
 neighbor group_7 route-map policy_1 out
 neighbor group_15 route-map policy_1 out
 neighbor group_6 route-map policy_1 out
 neighbor group_16 route-map policy_1 out
 neighbor group_1 route-map policy_2 out
 neighbor group_13 route-map policy_4 out
 neighbor group_0 route-map policy_1 out
 neighbor group_14 route-map policy_1 out
 neighbor group_3 route-map policy_0 out
 neighbor group_11 route-map policy_1 out
 neighbor group_2 route-map policy_1 out
 neighbor group_12 route-map policy_4 out
 neighbor group_10 route-map policy_4 out
!
route-map policy_0 deny 10
 match ip address prefix-list 1
route-map policy_0 deny 20

 match community 2
route-map policy_0 deny 30

 match protocol bgp
route-map policy_0 permit 40

 match protocol bgp
 set local-preference 100
route-map policy_0 permit 50
 match ip address prefix-list 6
 match protocol bgp
route-map policy_0 permit 60

 match community 7
 match protocol bgp
route-map policy_0 permit 70

 match protocol bgp
route-map policy_0 permit 80
 match ip address prefix-list 11
 match protocol bgp
route-map policy_0 permit 90
 match ip address prefix-list 12
 match protocol bgp
 set local-preference 100
route-map policy_0 permit 100

 match community 14
 match community 13
 match protocol bgp
route-map policy_0 permit 110

 match protocol bgp
!

route-map policy_2 deny 10
 match ip address prefix-list 15
route-map policy_2 deny 20

 match community 2
route-map policy_2 deny 30

 match protocol bgp
route-map policy_2 permit 40

 match protocol bgp
 set local-preference 100
route-map policy_2 permit 50
 match ip address prefix-list 6
 match protocol bgp
route-map policy_2 permit 60

 match community 7
 match protocol bgp
route-map policy_2 permit 70

 match protocol bgp
route-map policy_2 permit 80
 match ip address prefix-list 11
 match protocol bgp
route-map policy_2 permit 90
 match ip address prefix-list 12
 match protocol bgp
 set local-preference 100
route-map policy_2 permit 100

 match community 14
 match community 13
 match protocol bgp
route-map policy_2 permit 110

 match protocol bgp
!

route-map policy_1 permit 20

 match protocol bgp
!

route-map policy_4 deny 10

 match protocol bgp
route-map policy_4 deny 20
 match ip address prefix-list 24
 match protocol bgp
route-map policy_4 permit 30

 match community 7
 match protocol bgp
route-map policy_4 permit 40

 match protocol bgp
route-map policy_4 permit 50

 match protocol bgp
route-map policy_4 permit 60

 match community 21
 match community 20
 match protocol bgp
route-map policy_4 permit 70
 match ip address prefix-list 23
 match protocol bgp
route-map policy_4 permit 80
 match ip address prefix-list 6
 match protocol bgp
route-map policy_4 permit 90

 match protocol bgp
!

route-map policy_3 deny 10

 match protocol bgp
route-map policy_3 deny 20
 match ip address prefix-list 17
 match protocol bgp
route-map policy_3 permit 30

 match community 7
 match protocol bgp
route-map policy_3 permit 40

 match protocol bgp
route-map policy_3 permit 50

 match protocol bgp
route-map policy_3 permit 60

 match community 21
 match community 20
 match protocol bgp
route-map policy_3 permit 70

 match community 22
 match protocol bgp
route-map policy_3 permit 80
 match ip address prefix-list 23
 match protocol bgp
route-map policy_3 permit 90
 match ip address prefix-list 6
 match protocol bgp
route-map policy_3 permit 100

 match protocol bgp
!
ip prefix-list 1 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip community-list 2 permit 23118:50063
!
ip prefix-list 6 seq 10 permit 113.146.0.0/16 ge 16 le 32
ip prefix-list 6 seq 20 permit 113.2.0.0/16 ge 16 le 32
ip prefix-list 6 seq 30 permit 113.213.0.0/16 ge 16 le 32
ip prefix-list 6 seq 40 permit 113.27.0.0/16 ge 16 le 32
ip prefix-list 6 seq 50 permit 79.244.0.0/15 ge 15 le 32
ip prefix-list 6 seq 60 permit 79.0.0.0/15 ge 15 le 32
!
ip community-list 7 permit ^(23118:76...)$
!
ip prefix-list 11 seq 10 permit 124.209.32.0/23 ge 23 le 32
ip prefix-list 11 seq 20 permit 82.163.100.0/24 ge 24 le 32
ip prefix-list 11 seq 30 permit 163.154.128.128/25 ge 25 le 32
ip prefix-list 11 seq 40 permit 163.154.129.128/25 ge 25 le 32
!
ip community-list 13 permit 23118:8000
!
ip prefix-list 15 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip prefix-list 12 seq 10 permit 50.175.22.0/28 ge 28 le 28
ip prefix-list 12 seq 20 permit 50.175.22.16/28 ge 28 le 28
ip prefix-list 12 seq 30 permit 50.175.22.32/28 ge 28 le 28
ip prefix-list 12 seq 40 permit 135.74.21.0/24 ge 24 le 24
ip prefix-list 12 seq 50 permit 135.74.23.0/24 ge 24 le 24
ip prefix-list 12 seq 60 permit 194.110.64.0/24 ge 24 le 24
ip prefix-list 12 seq 70 permit 194.110.65.0/24 ge 24 le 24
ip prefix-list 12 seq 80 permit 95.180.1.0/24 ge 24 le 24
ip prefix-list 12 seq 90 permit 95.180.122.0/24 ge 24 le 24
ip prefix-list 12 seq 100 permit 64.55.111.0/24 ge 24 le 24
ip prefix-list 12 seq 110 permit 216.13.5.0/24 ge 24 le 24
ip prefix-list 12 seq 120 permit 216.78.6.0/24 ge 24 le 24
!
ip community-list 14 permit 35607:35607
!
ip prefix-list 24 seq 10 permit 0.0.0.0/0 ge 21 le 32
!
ip prefix-list 17 seq 10 permit 0.0.0.0/0 ge 21 le 32
!
ip community-list 21 permit ^(23118:39...)$
!
ip community-list 20 permit 94129:23111
!
ip community-list 22 permit ^(23111:39...)$
!
ip prefix-list 23 seq 10 permit 50.0.0.0/8 ge 8 le 32
ip prefix-list 23 seq 20 permit 49.128.0.0/12 ge 12 le 32
ip prefix-list 23 seq 30 permit 113.128.0.0/10 ge 10 le 32
ip prefix-list 23 seq 40 permit 146.0.0.0/8 ge 8 le 32
ip prefix-list 23 seq 50 permit 39.0.0.0/8 ge 8 le 32
!
ip route 163.154.129.166 255.255.255.255 10.0.1.180
!
ip route 163.154.129.162 255.255.255.255 10.0.5.161
!
ip route 163.154.129.170 255.255.255.255 10.0.2.176
!
ip route 82.163.100.236 255.255.255.255 10.0.4.200
!
ip route 163.154.129.161 255.255.255.255 10.0.0.172
!
ip route 82.163.100.235 255.255.255.255 10.0.4.112
!

