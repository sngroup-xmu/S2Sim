!
version 15.2
!
service timestamps debug datetime msec
!
service timestamps log datetime msec
!
boot-start-marker
!
boot-end-marker
!
no aaa new-model
!
ip cef
!
no ipv6 cef
!
multilink bundle-name authenticated
!
ip forward-protocol nd
!
no ip http server
!
no ip http secure-server
!
ip bgp-community new-format
!
hostname f
!
!
interface Fa0/0
 ip address 10.0.0.11 255.255.255.254
 description "To E"
 speed auto
 duplex auto
!
interface Fa0/1
 ip address 10.0.0.12 255.255.255.254
 description "To G"
 speed auto
 duplex auto
!
interface Fa1/0
 ip address 10.0.0.14 255.255.255.254
 description "To H"
 speed auto
 duplex auto
!
interface lo0
 ip address 30.0.0.1 255.255.255.254
 description "For Static"
 speed auto
 duplex auto
!
!
!
!type 1.2 下面这个就是静态路由的配置，可以把下一跳改成不合法的，e.g. 100.0.0.0，或者是删掉也行，只要让这条命令无效就行
ip route 128.0.1.0 255.255.255.0 30.0.0.0
!
!
!
!
!
!
router bgp 50
 no synchronization

 !type 1.1 可以直接删掉这条重分发命令
 redistribute static

 !type 1.3 添加路由策略过滤掉源发网段的路由
 !redistribute static route-map Route_from_Static


 !type 2.1 可以直接删掉类似76这种命令
 neighbor 10.0.0.10 remote-as 40
 neighbor 10.0.0.10 description "To E"
 neighbor 10.0.0.10 advertisement-interval 0
 neighbor 10.0.0.10 soft-reconfiguration inbound
 neighbor 10.0.0.10 send-community

 neighbor 10.0.0.13 remote-as 60
 neighbor 10.0.0.13 description "To G"
 neighbor 10.0.0.13 advertisement-interval 0
 neighbor 10.0.0.13 soft-reconfiguration inbound
 neighbor 10.0.0.13 send-community

 neighbor 10.0.0.15 remote-as 70
 neighbor 10.0.0.15 description "To H"
 neighbor 10.0.0.15 advertisement-interval 0
 neighbor 10.0.0.15 soft-reconfiguration inbound
 neighbor 10.0.0.15 send-community
!
!
!
!type 1.3 先添加prefix-list；再添加deny静态路由的路由策略(97-101行)
!ip prefix-list 1 permit 128.0.1.0/24

!route-map Route_from_Static deny 10
! match ip address prefix-list 1 
!route-map Route_from_Static permit 100
!
!
!type 3.1 跟1.3类似（106-110行），注意需要在BGP进程中相应neighbor的配置下添加策略引用命令：neighbor xxx route-map xxxx in/out (in和out表示是import的策略还是export的策略，二者写其一)
!我写的随机注入路由策略的脚本在error-inject文件夹，需要验证一下，然后根据结果写requirement
!ip prefix-list 1 permit 128.0.1.0/24

!route-map RMap_F_from_E deny 10
! match ip address prefix-list 1
!route-map RMap_F_from_E permit 100
!
!
!
!type 4.1 可以通过添加(113-115)这种修改lp的策略，更改选路，注意需要在BGP进程中相应neighbor的配置下添加策略引用命令：neighbor xxx route-map xxxx in
!route-map RMap_F_from_E permit 10
! set local-preference 120
!route-map RMap_F_from_E permit 100
!
!
!
!
!
control-plane
!
!
line con 0
 stopbits 1
line aux 0
 stopbits 1
line vty 0 4
 login
!
end
