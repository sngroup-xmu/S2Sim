!
version 15.2
!
service timestamps debug datetime msec
!
service timestamps log datetime msec
!
boot-start-marker
!
boot-end-marker
!
no aaa new-model
!
ip cef
!
no ipv6 cef
!
multilink bundle-name authenticated
!
ip forward-protocol nd
!
no ip http server
!
no ip http secure-server
!
ip bgp-community new-format
!
hostname role_3-site_28-device_0
!
interface GigabitEthernet0/4
 ip address 10.0.1.173 255.255.255.252
 description role_1-site_14-device_0
!
interface GigabitEthernet0/5
 ip address 10.0.2.173 255.255.255.252
 description role_1-site_17-device_0
!
interface GigabitEthernet0/7
 ip address 10.0.4.129 255.255.255.252
 description role_2-site_8-device_1
!
interface GigabitEthernet0/8
 ip address 10.0.4.137 255.255.255.252
 description role_2-site_8-device_0
!
interface GigabitEthernet0/1
 ip address 10.0.0.125 255.255.255.252
 description role_3-site_27-device_0
!
interface GigabitEthernet0/2
 ip address 10.0.0.153 255.255.255.252
 description role_2-site_21-device_0
!
interface GigabitEthernet0/3
 ip address 10.0.0.205 255.255.255.252
 description role_2-site_21-device_1
!
interface GigabitEthernet0/9
 ip address 10.0.5.29 255.255.255.252
 description role_1-site_10-device_0
!
interface GigabitEthernet0/6
 ip address 10.0.3.213 255.255.255.252
 description role_1-site_12-device_0
!

!
interface loopback 0
 ip address 163.154.129.223 255.255.255.255
!
router bgp 165
 bgp router-id 163.154.129.223
 ! bgp cluster-id 0.0.101.4
 network 124.124.29.0 mask 255.255.255.0
 network 124.124.28.0 mask 255.255.255.0
 network 124.124.27.0 mask 255.255.255.0
 network 124.124.26.0 mask 255.255.255.0
 network 124.124.25.0 mask 255.255.255.0
 network 124.124.24.0 mask 255.255.255.0
 network 0.0.0.0 mask 0.0.0.0
 neighbor group_8 peer-group
 neighbor group_8 send-community both
 neighbor group_5 peer-group
 neighbor 163.154.129.166 peer-group group_5
 neighbor 163.154.129.166 remote-as 128
 neighbor 163.154.129.166 description role_1-site_14-device_0
 neighbor 163.154.129.166 update-source LoopBack0
 neighbor 163.154.129.170 peer-group group_5
 neighbor 163.154.129.170 remote-as 130
 neighbor 163.154.129.170 description role_1-site_17-device_0
 neighbor 163.154.129.170 update-source LoopBack0
 neighbor group_5 send-community both
 neighbor group_4 peer-group
 neighbor 82.163.100.89 peer-group group_4
 neighbor 82.163.100.89 remote-as 127
 neighbor 82.163.100.89 description role_1-site_12-device_0
 neighbor 82.163.100.89 update-source LoopBack0
 neighbor 82.163.100.88 peer-group group_4
 neighbor 82.163.100.88 remote-as 126
 neighbor 82.163.100.88 description role_1-site_10-device_0
 neighbor 82.163.100.88 update-source LoopBack0
 neighbor group_4 send-community both
 neighbor group_7 peer-group
 neighbor group_7 send-community both
 neighbor group_6 peer-group
 neighbor group_6 send-community both
 neighbor group_1 peer-group
 neighbor group_1 send-community both
 neighbor group_0 peer-group
 neighbor 163.154.129.222 peer-group group_0
 neighbor 163.154.129.222 remote-as 164
 neighbor 163.154.129.222 description role_3-site_27-device_0
 neighbor 163.154.129.222 update-source LoopBack0
 neighbor group_0 send-community both
 neighbor group_3 peer-group
 neighbor 82.163.100.182 peer-group group_3
 neighbor 82.163.100.182 remote-as 147
 neighbor 82.163.100.182 description role_2-site_8-device_0
 neighbor 82.163.100.182 update-source LoopBack0
 neighbor 82.163.100.181 peer-group group_3
 neighbor 82.163.100.181 remote-as 141
 neighbor 82.163.100.181 description role_2-site_21-device_1
 neighbor 82.163.100.181 update-source LoopBack0
 neighbor group_3 send-community both
 neighbor group_2 peer-group
 neighbor 82.163.100.93 peer-group group_2
 neighbor 82.163.100.93 remote-as 140
 neighbor 82.163.100.93 description role_2-site_21-device_0
 neighbor 82.163.100.93 update-source LoopBack0
 neighbor 82.163.100.92 peer-group group_2
 neighbor 82.163.100.92 remote-as 148
 neighbor 82.163.100.92 description role_2-site_8-device_1
 neighbor 82.163.100.92 update-source LoopBack0
 neighbor group_2 send-community both
 neighbor group_5 route-map policy_4 in
 neighbor group_4 route-map policy_4 in
 neighbor group_3 route-map policy_3 in
 neighbor group_2 route-map policy_3 in
 neighbor group_8 route-map policy_2 out
 neighbor group_5 route-map policy_5 out
 neighbor group_4 route-map policy_5 out
 neighbor group_7 route-map policy_2 out
 neighbor group_6 route-map policy_2 out
 neighbor group_1 route-map policy_1 out
 neighbor group_3 route-map policy_0 out
 neighbor group_2 route-map policy_0 out
!
route-map policy_5 permit 10
 match ip address prefix-list 40
route-map policy_5 permit 20
 match ip address prefix-list 22
route-map policy_5 permit 25

 match community 41
 set community 23118:62010 23118:8000 additive
route-map policy_5 permit 30
 match ip address prefix-list 42
 set community 23118:62010 23118:8000 additive
route-map policy_5 deny 40
 match ip address prefix-list 4
route-map policy_5 permit 60

 match community 43
route-map policy_5 permit 100

!

route-map policy_0 permit 100

!

route-map policy_2 permit 10
 match ip address prefix-list 4
route-map policy_2 permit 20

 match community 5
 match community 6
route-map policy_2 permit 30

 match community 9
 match community 7
 match community 8
route-map policy_2 permit 40
 match ip address prefix-list 10
route-map policy_2 deny 100

!

route-map policy_1 permit 100

!

route-map policy_4 deny 5

 match community 14
route-map policy_4 permit 6
 match ip address prefix-list 4
 set local-preference 100
route-map policy_4 permit 30

 match community 18
route-map policy_4 permit 50

 match community 8
route-map policy_4 permit 60

 match community 9
 match community 7
route-map policy_4 permit 80
 match ip address prefix-list 22
route-map policy_4 permit 90
 match ip address prefix-list 23
route-map policy_4 deny 100

 match community 25
 match community 24
route-map policy_4 permit 110

 match community 26
 match community 32
 match community 28
 match community 30
 match community 33
 match community 5
 match community 24
 match community 36
 match community 35
 match community 6
route-map policy_4 deny 1000

!

route-map policy_3 permit 3
 match ip address prefix-list 11
route-map policy_3 permit 5
 match ip address prefix-list 13
route-map policy_3 permit 10
 match ip address prefix-list 11
 set local-preference 100
route-map policy_3 permit 20
 match ip address prefix-list 13
 set local-preference 100
route-map policy_3 permit 100

!
ip prefix-list 40 seq 1 permit 6.93.1.1/32 ge 32 le 32
ip prefix-list 40 seq 10 permit 82.163.100.152/32 ge 32 le 32
ip prefix-list 40 seq 20 permit 82.163.100.153/32 ge 32 le 32
!
ip prefix-list 22 seq 10 permit 113.146.0.0/16 ge 16 le 32
ip prefix-list 22 seq 20 permit 113.2.0.0/16 ge 16 le 32
ip prefix-list 22 seq 30 permit 113.213.0.0/16 ge 16 le 32
ip prefix-list 22 seq 40 permit 113.27.0.0/16 ge 16 le 32
ip prefix-list 22 seq 50 permit 79.244.0.0/15 ge 15 le 32
ip prefix-list 22 seq 60 permit 79.0.0.0/15 ge 15 le 32
!
ip community-list 41 permit 35607:8807
!
ip prefix-list 42 seq 10 permit 130.200.0.0/19 ge 19 le 19
ip prefix-list 42 seq 20 permit 130.169.97.0/24 ge 24 le 24
ip prefix-list 42 seq 30 permit 130.123.0.0/18 ge 18 le 18
ip prefix-list 42 seq 40 permit 130.123.0.0/19 ge 19 le 19
ip prefix-list 42 seq 50 permit 130.123.32.0/19 ge 19 le 19
!
ip prefix-list 4 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip community-list expanded 43 permit ^23118:79...$
!
!
ip community-list 5 permit 23118:8000
!
ip community-list 6 permit 35607:35607
!
ip community-list expanded 9 permit ^23118:39...$
!
ip community-list 7 permit 94129:23111
!
ip community-list expanded 8 permit ^23111:39...$
!
ip prefix-list 10 seq 10 permit 50.0.0.0/8 ge 8 le 32
ip prefix-list 10 seq 20 permit 49.128.0.0/12 ge 12 le 32
ip prefix-list 10 seq 30 permit 113.128.0.0/10 ge 10 le 32
ip prefix-list 10 seq 40 permit 146.0.0.0/8 ge 8 le 32
ip prefix-list 10 seq 50 permit 134.0.0.0/8 ge 8 le 32
ip prefix-list 10 seq 60 permit 39.0.0.0/8 ge 8 le 32
!
ip community-list 14 permit 23118:50063
!
!
ip community-list expanded 18 permit ^23118:76...$
!
!
!
!
ip prefix-list 23 seq 10 permit 163.154.128.0/24 ge 24 le 32
ip prefix-list 23 seq 20 permit 163.154.129.0/24 ge 24 le 32
ip prefix-list 23 seq 30 permit 82.163.64.0/24 ge 24 le 32
ip prefix-list 23 seq 40 permit 82.163.65.0/24 ge 24 le 32
ip prefix-list 23 seq 50 permit 82.163.68.0/22 ge 22 le 32
ip prefix-list 23 seq 60 permit 82.163.100.0/24 ge 24 le 32
ip prefix-list 23 seq 70 permit 82.163.101.0/24 ge 24 le 32
ip prefix-list 23 seq 80 permit 82.163.74.0/24 ge 24 le 32
ip prefix-list 23 seq 90 permit 134.219.214.192/26 ge 26 le 32
!
ip community-list expanded 25 permit ^23118:652..$
!
ip community-list expanded 24 permit ^23118:626..$
!
ip community-list expanded 26 permit ^23118:655..$
!
ip community-list expanded 32 permit ^23118:623..$
!
ip community-list expanded 28 permit ^23118:622..$
!
ip community-list expanded 30 permit ^23118:625..$
!
ip community-list expanded 33 permit ^23118:656..$
!
!
!
ip community-list expanded 36 permit ^23118:620..$
!
ip community-list expanded 35 permit ^23118:629..$
!
!
ip prefix-list 11 seq 10 permit 50.116.128.0/17 ge 17 le 32
ip prefix-list 11 seq 20 permit 146.95.45.128/25 ge 25 le 32
ip prefix-list 11 seq 30 permit 146.148.129.0/25 ge 25 le 32
ip prefix-list 11 seq 40 permit 146.148.129.128/25 ge 25 le 32
ip prefix-list 11 seq 50 permit 146.148.130.0/25 ge 25 le 32
ip prefix-list 11 seq 60 permit 146.148.130.128/25 ge 25 le 32
ip prefix-list 11 seq 70 permit 146.148.131.0/25 ge 25 le 32
ip prefix-list 11 seq 80 permit 146.148.131.128/25 ge 25 le 32
ip prefix-list 11 seq 90 permit 146.148.128.0/17 ge 17 le 32
ip prefix-list 11 seq 100 permit 50.127.192.0/18 ge 18 le 32
ip prefix-list 11 seq 110 permit 39.93.0.0/16 ge 16 le 32
ip prefix-list 11 seq 120 permit 146.246.128.0/17 ge 17 le 32
!
ip prefix-list 13 seq 10 permit 146.178.105.0/24 ge 24 le 32
ip prefix-list 13 seq 20 permit 146.178.60.153/32 ge 32 le 32
ip prefix-list 13 seq 30 permit 146.178.60.154/32 ge 32 le 32
ip prefix-list 13 seq 40 permit 50.210.55.0/24 ge 24 le 32
!
ip route 163.154.129.166 255.255.255.255 10.0.1.172
!
ip route 163.154.129.170 255.255.255.255 10.0.2.172
!
ip route 82.163.100.92 255.255.255.255 10.0.4.128
!
ip route 82.163.100.182 255.255.255.255 10.0.4.136
!
ip route 163.154.129.222 255.255.255.255 10.0.0.124
!
ip route 82.163.100.93 255.255.255.255 10.0.0.152
!
ip route 82.163.100.181 255.255.255.255 10.0.0.204
!
ip route 82.163.100.88 255.255.255.255 10.0.5.28
!
ip route 82.163.100.89 255.255.255.255 10.0.3.212
!
ip route 124.124.24.0 255.255.255.0 Null0
ip route 124.124.25.0 255.255.255.0 Null0
ip route 124.124.26.0 255.255.255.0 Null0
ip route 124.124.27.0 255.255.255.0 Null0
ip route 124.124.28.0 255.255.255.0 Null0
ip route 124.124.29.0 255.255.255.0 Null0
