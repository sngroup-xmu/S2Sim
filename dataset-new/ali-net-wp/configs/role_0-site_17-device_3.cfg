!
version 15.2
!
service timestamps debug datetime msec
!
service timestamps log datetime msec
!
boot-start-marker
!
boot-end-marker
!
no aaa new-model
!
ip cef
!
no ipv6 cef
!
multilink bundle-name authenticated
!
ip forward-protocol nd
!
no ip http server
!
no ip http secure-server
!
ip bgp-community new-format
!
hostname role_0-site_17-device_3
!
interface GigabitEthernet0/2
 ip address 10.0.0.76 255.255.255.252
 description role_1-site_14-device_0
!
interface GigabitEthernet0/3
 ip address 10.0.0.80 255.255.255.252
 description role_1-site_17-device_0
!
interface GigabitEthernet0/1
 ip address 10.0.0.65 255.255.255.252
 description role_0-site_17-device_2
!
interface GigabitEthernet0/4
 ip address 10.0.0.84 255.255.255.252
 description role_1-site_10-device_0
!
interface GigabitEthernet0/5
 ip address 10.0.0.88 255.255.255.252
 description role_1-site_12-device_0
!

!
interface loopback 0
 ip address 64.55.127.254 255.255.255.255
!
router bgp 109
 bgp router-id 64.55.127.254
 neighbor group_1 peer-group
 neighbor 64.55.127.253 peer-group group_1
 neighbor 64.55.127.253 remote-as 108
 neighbor 64.55.127.253 description role_0-site_17-device_2
 neighbor 64.55.127.253 update-source LoopBack0
 neighbor group_1 send-community both
 neighbor group_0 peer-group
 neighbor 163.154.129.166 peer-group group_0
 neighbor 163.154.129.166 remote-as 128
 neighbor 163.154.129.166 description role_1-site_14-device_0
 neighbor 163.154.129.166 update-source LoopBack0
 neighbor 163.154.129.170 peer-group group_0
 neighbor 163.154.129.170 remote-as 130
 neighbor 163.154.129.170 description role_1-site_17-device_0
 neighbor 163.154.129.170 update-source LoopBack0
 neighbor group_0 send-community both
 neighbor group_2 peer-group
 neighbor 82.163.100.89 peer-group group_2
 neighbor 82.163.100.89 remote-as 127
 neighbor 82.163.100.89 description role_1-site_12-device_0
 neighbor 82.163.100.89 update-source LoopBack0
 neighbor 82.163.100.88 peer-group group_2
 neighbor 82.163.100.88 remote-as 126
 neighbor 82.163.100.88 description role_1-site_10-device_0
 neighbor 82.163.100.88 update-source LoopBack0
 neighbor group_2 send-community both
 neighbor group_0 route-map policy_2 in
 neighbor group_2 route-map policy_2 in
 neighbor group_1 route-map policy_1 out
 neighbor group_0 route-map policy_0 out
 neighbor group_2 route-map policy_0 out
!
route-map policy_0 permit 10
 match ip address prefix-list 1
 set ip next-hop 64.55.127.254
 set community 23118:65600 23118:65688 23118:8000 23118:76000 35607:8807 23118:61007 additive
route-map policy_0 permit 20
 match ip address prefix-list 2
 set ip next-hop 64.55.127.254
route-map policy_0 permit 30
 match ip address prefix-list 2
 match protocol bgp
 set ip next-hop 64.55.127.254
 set community 23118:65600 23118:8000 23118:76000 23118:61007 additive
route-map policy_0 permit 40
 match ip address prefix-list 3
 match protocol bgp
 set ip next-hop 64.55.127.254
route-map policy_0 permit 50
 match ip address prefix-list 4
 match protocol bgp
 set ip next-hop 64.55.127.254
route-map policy_0 permit 60

 match protocol bgp
 set ip next-hop 64.55.127.254
route-map policy_0 permit 70
 match ip address prefix-list 7
 match protocol ospf
 set ip next-hop 64.55.127.254
route-map policy_0 deny 80

!

route-map policy_2 permit 10
 match ip address prefix-list 8
route-map policy_2 permit 20
 match ip address prefix-list 9
 match protocol bgp
route-map policy_2 permit 30

 match community 10
route-map policy_2 permit 40

 match community 11
route-map policy_2 permit 50

 match community 12
 match protocol bgp
route-map policy_2 permit 60

 match protocol bgp
route-map policy_2 permit 70

 match community 16
 match protocol bgp
route-map policy_2 permit 80
 match ip address prefix-list 17
 match protocol bgp
route-map policy_2 permit 90

 match protocol bgp
route-map policy_2 deny 100

!

route-map policy_1 permit 10

 set ip next-hop 64.55.127.254
!
ip prefix-list 1 seq 10 permit 163.154.184.0/21 ge 21 le 21
ip prefix-list 1 seq 20 permit 64.55.125.0/24 ge 24 le 24
!
ip prefix-list 2 seq 10 permit 6.93.1.1/32 ge 32 le 32
ip prefix-list 2 seq 20 permit 113.146.70.128/26 ge 26 le 32
ip prefix-list 2 seq 30 permit 130.196.102.0/24 ge 24 le 32
ip prefix-list 2 seq 40 permit 130.196.103.0/24 ge 24 le 32
ip prefix-list 2 seq 50 permit 130.196.176.0/24 ge 24 le 32
ip prefix-list 2 seq 60 permit 130.196.177.64/27 ge 27 le 32
ip prefix-list 2 seq 70 permit 130.196.177.128/26 ge 26 le 32
ip prefix-list 2 seq 80 permit 130.196.177.192/26 ge 26 le 32
ip prefix-list 2 seq 90 permit 163.154.189.0/24 ge 24 le 32
ip prefix-list 2 seq 100 permit 130.169.82.224/28 ge 28 le 32
ip prefix-list 2 seq 110 permit 163.154.188.0/24 ge 24 le 32
ip prefix-list 2 seq 120 permit 130.169.82.240/28 ge 28 le 32
ip prefix-list 2 seq 130 permit 130.169.82.192/29 ge 29 le 32
ip prefix-list 2 seq 140 permit 163.154.190.0/24 ge 24 le 32
ip prefix-list 2 seq 150 permit 130.196.177.0/26 ge 26 le 32
ip prefix-list 2 seq 160 permit 64.55.125.128/27 ge 27 le 27
ip prefix-list 2 seq 170 permit 163.154.187.0/24 ge 24 le 24
ip prefix-list 2 seq 180 permit 163.154.188.0/22 ge 22 le 31
ip prefix-list 2 seq 190 permit 163.154.186.0/24 ge 24 le 31
ip prefix-list 2 seq 200 permit 64.55.111.0/24 ge 24 le 24
ip prefix-list 2 seq 210 permit 163.154.184.0/21 ge 21 le 21
ip prefix-list 2 seq 220 permit 163.154.184.0/24 ge 24 le 24
ip prefix-list 2 seq 230 permit 163.154.185.0/25 ge 25 le 25
ip prefix-list 2 seq 240 permit 64.55.125.0/24 ge 24 le 24
ip prefix-list 2 seq 250 permit 130.173.31.224/27 ge 27 le 27
ip prefix-list 2 seq 260 permit 130.196.96.0/28 ge 28 le 28
ip prefix-list 2 seq 270 permit 113.146.84.64/26 ge 26 le 32
ip prefix-list 2 seq 280 permit 113.146.84.192/26 ge 26 le 32
ip prefix-list 2 seq 290 permit 130.196.96.16/28 ge 28 le 32
ip prefix-list 2 seq 300 permit 130.196.177.96/28 ge 28 le 32
!
ip prefix-list 3 seq 10 permit 130.160.0.0/14 ge 14 le 32
ip prefix-list 3 seq 20 permit 82.163.64.0/18 ge 18 le 32
ip prefix-list 3 seq 30 permit 163.154.128.0/18 ge 18 le 32
ip prefix-list 3 seq 40 permit 64.55.96.0/19 ge 19 le 32
!
ip prefix-list 4 seq 10 permit 110.218.252.0/30 ge 30 le 30
!
ip prefix-list 7 seq 10 permit 130.150.0.0/16 ge 16 le 16
ip prefix-list 7 seq 20 permit 130.38.0.0/15 ge 15 le 15
ip prefix-list 7 seq 30 permit 130.122.0.0/15 ge 15 le 15
ip prefix-list 7 seq 40 permit 130.72.0.0/14 ge 14 le 14
ip prefix-list 7 seq 50 permit 130.96.0.0/13 ge 13 le 13
ip prefix-list 7 seq 60 permit 130.226.0.0/16 ge 16 le 16
ip prefix-list 7 seq 70 permit 130.148.0.0/14 ge 14 le 14
ip prefix-list 7 seq 80 permit 130.8.0.0/14 ge 14 le 14
ip prefix-list 7 seq 90 permit 130.180.0.0/15 ge 15 le 15
ip prefix-list 7 seq 100 permit 130.196.0.0/16 ge 16 le 16
ip prefix-list 7 seq 110 permit 130.28.0.0/15 ge 15 le 15
ip prefix-list 7 seq 120 permit 130.188.0.0/15 ge 15 le 15
ip prefix-list 7 seq 130 permit 130.211.0.0/16 ge 16 le 16
!
ip prefix-list 8 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip prefix-list 9 seq 10 permit 163.154.128.0/24 ge 24 le 32
ip prefix-list 9 seq 20 permit 163.154.129.0/24 ge 24 le 32
ip prefix-list 9 seq 30 permit 82.163.64.0/24 ge 24 le 32
ip prefix-list 9 seq 40 permit 82.163.65.0/24 ge 24 le 32
ip prefix-list 9 seq 50 permit 82.163.68.0/22 ge 22 le 32
ip prefix-list 9 seq 60 permit 110.218.252.0/30 ge 30 le 30
!
ip community-list 10 permit 23118:65630 23118:79000
!
ip community-list 11 permit 23118:65637 23118:79000
!
ip community-list 12 permit 23118:76000
!
ip community-list 16 permit 23118:23006 23118:79000
!
ip prefix-list 17 seq 10 permit 64.55.96.0/19 ge 19 le 19
ip prefix-list 17 seq 20 permit 64.55.112.0/21 ge 21 le 21
!
ip route 163.154.129.166 255.255.255.255 10.0.0.77
!
ip route 163.154.129.170 255.255.255.255 10.0.0.81
!
ip route 64.55.127.253 255.255.255.255 10.0.0.64
!
ip route 82.163.100.88 255.255.255.255 10.0.0.85
!
ip route 82.163.100.89 255.255.255.255 10.0.0.89
!

