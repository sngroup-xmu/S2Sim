!
version 15.2
!
service timestamps debug datetime msec
!
service timestamps log datetime msec
!
boot-start-marker
!
boot-end-marker
!
no aaa new-model
!
ip cef
!
no ipv6 cef
!
multilink bundle-name authenticated
!
ip forward-protocol nd
!
no ip http server
!
no ip http secure-server
!
ip bgp-community new-format
!
hostname role_3-site_23-device_0
!
interface GigabitEthernet0/2
 ip address 10.0.1.221 255.255.255.252
 description role_1-site_14-device_0
!
interface GigabitEthernet0/3
 ip address 10.0.2.221 255.255.255.252
 description role_1-site_17-device_0
!
interface GigabitEthernet0/5
 ip address 10.0.5.77 255.255.255.252
 description role_1-site_10-device_0
!
interface GigabitEthernet0/1
 ip address 10.0.0.233 255.255.255.252
 description role_3-site_24-device_0
!
interface GigabitEthernet0/4
 ip address 10.0.4.5 255.255.255.252
 description role_1-site_12-device_0
!

!
interface loopback 0
 ip address 163.154.129.230 255.255.255.255
!
router bgp 162
 bgp router-id 163.154.129.230
 ! bgp cluster-id 0.0.101.7
 network 0.0.0.0 mask 0.0.0.0
 neighbor group_4 peer-group
 neighbor 82.163.100.89 peer-group group_4
 neighbor 82.163.100.89 remote-as 127
 neighbor 82.163.100.89 description role_1-site_12-device_0
 neighbor 82.163.100.89 update-source LoopBack0
 neighbor 82.163.100.88 peer-group group_4
 neighbor 82.163.100.88 remote-as 126
 neighbor 82.163.100.88 description role_1-site_10-device_0
 neighbor 82.163.100.88 update-source LoopBack0
 neighbor group_4 send-community both
 neighbor group_1 peer-group
 neighbor group_1 send-community both
 neighbor group_0 peer-group
 neighbor 163.154.129.166 peer-group group_0
 neighbor 163.154.129.166 remote-as 128
 neighbor 163.154.129.166 description role_1-site_14-device_0
 neighbor 163.154.129.166 update-source LoopBack0
 neighbor 163.154.129.170 peer-group group_0
 neighbor 163.154.129.170 remote-as 130
 neighbor 163.154.129.170 description role_1-site_17-device_0
 neighbor 163.154.129.170 update-source LoopBack0
 neighbor group_0 send-community both
 neighbor group_3 peer-group
 neighbor group_3 send-community both
 neighbor group_2 peer-group
 neighbor 163.154.129.233 peer-group group_2
 neighbor 163.154.129.233 remote-as 163
 neighbor 163.154.129.233 description role_3-site_24-device_0
 neighbor 163.154.129.233 update-source LoopBack0
 neighbor group_2 send-community both
 neighbor group_4 route-map policy_1 in
 neighbor group_0 route-map policy_1 in
 neighbor group_3 route-map policy_2 in
 neighbor group_4 route-map policy_3 out
 neighbor group_1 route-map policy_0 out
 neighbor group_0 route-map policy_3 out
 neighbor group_3 route-map policy_0 out
!
route-map policy_0 permit 10
 match ip address prefix-list 1
route-map policy_0 permit 20

 match community 2
 match community 3
route-map policy_0 permit 30

 match community 5
 match community 4
 match community 6
route-map policy_0 permit 40
 match ip address prefix-list 7
route-map policy_0 deny 100

!

route-map policy_2 permit 10

 match community 4
 match community 6
route-map policy_2 permit 100

!

route-map policy_1 permit 5
 match ip address prefix-list 9
route-map policy_1 permit 6
 match ip address prefix-list 1
 set local-preference 100
route-map policy_1 permit 30

 match community 13
route-map policy_1 permit 50

 match community 5
route-map policy_1 permit 60

 match community 4
 match community 6
route-map policy_1 permit 80
 match ip address prefix-list 17
route-map policy_1 permit 90
 match ip address prefix-list 18
route-map policy_1 deny 1000

!

route-map policy_3 permit 10
 match ip address prefix-list 23
route-map policy_3 permit 20
 match ip address prefix-list 17
route-map policy_3 permit 25

 match community 24
 set community 23118:65210 23118:8000 additive
route-map policy_3 deny 40
 match ip address prefix-list 1
route-map policy_3 deny 60

 match community 25
route-map policy_3 permit 100

!
ip prefix-list 1 seq 10 permit 0.0.0.0/0 ge 0 le 0
!
ip community-list 2 permit 23118:8000
!
ip community-list 3 permit 35607:35607
!
ip community-list expanded 5 permit ^23111:39...$
!
ip community-list 4 permit 94129:23111
!
ip community-list expanded 6 permit ^23118:39...$
!
ip prefix-list 7 seq 10 permit 0.0.0.0/0 ge 0 le 22
!
ip prefix-list 9 seq 10 permit 216.13.5.0/24 ge 24 le 24
ip prefix-list 9 seq 20 permit 216.78.6.0/24 ge 24 le 24
ip prefix-list 9 seq 30 permit 95.180.1.0/24 ge 24 le 24
ip prefix-list 9 seq 40 permit 95.180.122.0/24 ge 24 le 24
ip prefix-list 9 seq 50 permit 110.218.252.0/30 ge 30 le 30
ip prefix-list 9 seq 60 permit 110.218.252.4/30 ge 30 le 30
!
ip community-list expanded 13 permit ^23118:76...$
!
ip prefix-list 17 seq 10 permit 113.146.0.0/16 ge 16 le 32
ip prefix-list 17 seq 20 permit 113.2.0.0/16 ge 16 le 32
ip prefix-list 17 seq 30 permit 113.213.0.0/16 ge 16 le 32
ip prefix-list 17 seq 40 permit 113.27.0.0/16 ge 16 le 32
ip prefix-list 17 seq 50 permit 79.244.0.0/15 ge 15 le 32
ip prefix-list 17 seq 60 permit 79.0.0.0/15 ge 15 le 32
!
ip prefix-list 18 seq 10 permit 163.154.128.0/24 ge 24 le 32
ip prefix-list 18 seq 20 permit 163.154.129.0/24 ge 24 le 32
ip prefix-list 18 seq 30 permit 82.163.64.0/24 ge 24 le 32
ip prefix-list 18 seq 40 permit 82.163.65.0/24 ge 24 le 32
ip prefix-list 18 seq 50 permit 82.163.68.0/22 ge 22 le 32
ip prefix-list 18 seq 60 permit 82.163.100.0/24 ge 24 le 32
ip prefix-list 18 seq 70 permit 82.163.101.0/24 ge 24 le 32
ip prefix-list 18 seq 80 permit 82.163.74.0/24 ge 24 le 32
!
ip prefix-list 23 seq 1 permit 6.93.1.1/32 ge 32 le 32
ip prefix-list 23 seq 2 permit 163.154.129.231/32 ge 32 le 32
ip prefix-list 23 seq 3 permit 163.154.129.232/32 ge 32 le 32
ip prefix-list 23 seq 4 permit 163.154.129.220/32 ge 32 le 32
ip prefix-list 23 seq 5 permit 163.154.129.221/32 ge 32 le 32
ip prefix-list 23 seq 15 permit 218.150.78.209/32 ge 32 le 32
ip prefix-list 23 seq 25 permit 218.150.78.210/32 ge 32 le 32
ip prefix-list 23 seq 35 permit 218.150.78.211/32 ge 32 le 32
ip prefix-list 23 seq 45 permit 218.150.78.212/32 ge 32 le 32
ip prefix-list 23 seq 55 permit 140.170.61.16/32 ge 32 le 32
ip prefix-list 23 seq 65 permit 140.170.61.17/32 ge 32 le 32
ip prefix-list 23 seq 75 permit 140.170.61.18/32 ge 32 le 32
ip prefix-list 23 seq 85 permit 140.170.61.19/32 ge 32 le 32
!
ip community-list 24 permit 35607:8807
!
ip community-list expanded 25 permit ^23118:79...$
!
ip route 163.154.129.166 255.255.255.255 10.0.1.220
!
ip route 163.154.129.170 255.255.255.255 10.0.2.220
!
ip route 82.163.100.88 255.255.255.255 10.0.5.76
!
ip route 163.154.129.233 255.255.255.255 10.0.0.232
!
ip route 82.163.100.89 255.255.255.255 10.0.4.4
!

